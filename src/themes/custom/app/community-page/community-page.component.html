<div class="landing-wrapper">
  
  <div class="landing-background">
    <img src="assets/test/images/fondo-test.jpg" alt="Fondo" class="bg-img">
  </div>

  <header class="landing-header">
    <div class="logo-group">
      <div class="logo-container">
        <img src="assets/images/dspace-logo.svg" alt="Ministerio" class="ministry-logo">
        <div class="logo-text">
            <span>Ministerio de</span>
            <span>Educaci칩n</span>
            <small>GUATEMALA</small>
        </div>
      </div>
      <div class="logo-container">
        <img src="assets/images/dspace-logo.svg" alt="INNOVA" class="ministry-logo">
        <div class="logo-text"><span>INNOVA</span></div>
      </div>
    </div>
    
    <div class="auth-container">
      <!-- Search Button -->
      <a [routerLink]="['/search']" [queryParams]="{ view: 'grid' }" class="search-pill" title="B칰squeda Avanzada">
        <i class="fas fa-search"></i>
        <span class="search-text d-none d-md-inline">B칰squeda Avanzada</span>
      </a>

      <!-- Statistics Button -->
      <ng-container *ngIf="(communityRD$ | async)?.payload as community">
        <a [routerLink]="['/statistics/communities', community.id]" class="stats-pill" title="Estad칤sticas">
          <i class="fas fa-chart-bar"></i>
        </a>
      </ng-container>

      <!-- Si NO est치 autenticado, mostrar bot칩n de iniciar sesi칩n -->
      <ng-container *ngIf="!(isAuthenticated$ | async)">
        <a routerLink="/login" class="login-pill">Iniciar Sesi칩n</a>
      </ng-container>
      
      <!-- Si EST츼 autenticado, mostrar men칰 de usuario -->
      <ng-container *ngIf="isAuthenticated$ | async">
        <div class="user-menu-container">
          <a routerLink="/profile" class="user-pill" title="Mi Perfil">
            <i class="fas fa-user-circle"></i>
            <span>Mi Perfil</span>
          </a>
          <a routerLink="/logout" class="logout-pill" title="Cerrar Sesi칩n">
            <i class="fas fa-sign-out-alt"></i>
          </a>
        </div>
      </ng-container>
    </div>
  
  </header>

  <main class="landing-main">
    <div class="content-grid">
      
      <div class="character-col">
        <img src="assets/test/images/astronauta.png" alt="Ajk'iy" class="astronaut-char">
      </div>

      <div class="interaction-col">
        
        <div class="nav-path">
            <span class="path-label">Ruta:</span>
            
            <div class="path-steps">
                <a routerLink="/home" class="path-pill home-btn">
                    INICIO
                </a>

                <ng-container *ngIf="(breadcrumbs$ | async) as breadcrumbs">
                    <ng-container *ngFor="let bc of breadcrumbs; let i = index; let last = last">
                        <!-- Skip Home by URL check instead of index -->
                        <ng-container *ngIf="bc.url !== '/home' && bc.url !== '/'">
                            <span class="separator">/</span>
                            
                            <!-- If not last, show as link -->
                            <a *ngIf="!last" [routerLink]="bc.url" class="path-pill">
                                {{ bc.text | translate }}
                            </a>

                            <!-- If last, show as text (current) -->
                            <span *ngIf="last" class="current-location">
                                {{ bc.text | translate }}
                            </span>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </div>
        </div>
        <!-- <div class="speech-bubble" *ngIf="(communityRD$ | async)?.payload as community">
           <h1>춰Est치s en {{ community.name }}!</h1>
           <p>Selecciona tu siguiente paso:</p>
        </div> -->

        <div class="selection-area">
          <div class="level-buttons">
            
            <ng-container *ngIf="(subCommunities$ | async) as subComsRD">
              <ng-container *ngIf="subComsRD?.hasSucceeded">
                 <a *ngFor="let child of subComsRD.payload.page"
                    [routerLink]="['/communities', child.id]"
                    class="level-btn">
                    {{ child.name }}
                 </a>
              </ng-container>
            </ng-container>

            <ng-container *ngIf="(collections$ | async) as collsRD">
              <ng-container *ngIf="collsRD?.hasSucceeded">
                 <a *ngFor="let col of collsRD.payload.page"
                    [routerLink]="['/collections', col.id]"
                    class="level-btn content-btn">
                    游늭 {{ col.name }}
                 </a>
              </ng-container>
            </ng-container>

            <div *ngIf="(subCommunities$ | async)?.payload?.page?.length === 0 && (collections$ | async)?.payload?.page?.length === 0" 
                 style="color: #1a2b49; font-weight: bold; margin-top: 1rem;">
                <p>A칰n no hay contenido cargado en esta secci칩n.</p>
            </div>

          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="landing-footer">
    <div class="footer-left"></div>
    <div class="footer-right">
      <div class="digecade-badge">
        <img src="assets/images/dspace-logo.svg" class="digecade-logo">
      </div>
      <div class="social-links">
        <a href="#"><i class="fas fa-globe"></i></a>
      </div>
    </div>
  </footer>

</div>